exports.id=145,exports.ids=[145],exports.modules={10231:()=>{},16953:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>f,metadata:()=>e});var d=c(75338);c(82704);let e={title:"LaBPrompT - Laborat\xf3rio de Engenharia de Prompt",description:"Crie, teste, otimize e gerencie prompts de IA de forma profissional e eficiente"};function f({children:a}){return(0,d.jsx)("html",{lang:"pt-BR",children:(0,d.jsx)("body",{className:"bg-gray-900 text-gray-100",children:a})})}},29339:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,54160,23)),Promise.resolve().then(c.t.bind(c,31603,23)),Promise.resolve().then(c.t.bind(c,68495,23)),Promise.resolve().then(c.t.bind(c,75170,23)),Promise.resolve().then(c.t.bind(c,77526,23)),Promise.resolve().then(c.t.bind(c,78922,23)),Promise.resolve().then(c.t.bind(c,29234,23)),Promise.resolve().then(c.t.bind(c,12263,23)),Promise.resolve().then(c.bind(c,82146))},36369:(a,b,c)=>{"use strict";c.d(b,{$1:()=>C,CI:()=>i,D$:()=>s,F4:()=>n,HK:()=>o,Ir:()=>q,Mr:()=>t,ND:()=>h,Rk:()=>k,V1:()=>u,XH:()=>r,Zm:()=>w,bi:()=>D,ec:()=>m,ji:()=>p,k0:()=>x,n3:()=>v,r7:()=>l,sK:()=>A,tO:()=>B,x:()=>y});var d=c(74529),e=c(41059);let f="undefined"!=typeof process&&process.env?.NEXT_PUBLIC_SUPABASE_URL||"",g="undefined"!=typeof process&&process.env?.NEXT_PUBLIC_SUPABASE_ANON_KEY||"";f&&g||(console.error(`❌ ERRO: Vari\xe1veis de ambiente do Supabase n\xe3o configuradas!
⚠️ IMPORTANTE: Este projeto usa Next.js, ent\xe3o voc\xea DEVE usar:
   - NEXT_PUBLIC_SUPABASE_URL
   - NEXT_PUBLIC_SUPABASE_ANON_KEY
Configure na Vercel: Settings → Environment Variables
URL atual: ${f||"VAZIO"}
Key atual: ${g?g.substring(0,20)+"...":"VAZIO"}
`),"undefined"!=typeof process&&(console.error("⚠️ Aplica\xe7\xe3o em produ\xe7\xe3o sem configura\xe7\xe3o do Supabase!"),console.error("⚠️ Verifique se as vari\xe1veis est\xe3o com prefixo NEXT_PUBLIC_ na Vercel!")));let h=(0,d.UU)(f||"https://placeholder.supabase.co",g||"placeholder-key",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:void 0}});async function i(){let{error:a}=await h.auth.signOut();if(a)throw a}async function j(){let{data:{user:a},error:b}=await h.auth.getUser();if(b)throw b;return a}async function k(){let a=await j();if(!a)return null;let{data:b,error:c}=await h.from("profiles").select("*").eq("id",a.id).single();if(c){if("PGRST116"===c.code)return null;throw console.error("❌ [getCurrentProfile] Erro ao buscar perfil:",c),c}return b}async function l(a){let b=await j();if(!b)throw Error("Usu\xe1rio n\xe3o autenticado");let c={};if(void 0!==a.full_name){let b=(0,e.jZ)(a.full_name.trim());b.length>0?c.full_name=b:c.full_name=""}let{data:d,error:f}=await h.from("profiles").select("id").eq("id",b.id).single();if(f&&"PGRST116"!==f.code)throw console.error("❌ [updateProfile] Erro ao verificar perfil:",f),f;if(!d){let{data:a}=await h.auth.getSession(),d=a?.session?.user?.email||"",{data:e,error:f}=await h.from("profiles").insert({id:b.id,email:d,full_name:c.full_name||""}).select().single();if(f)throw console.error("❌ [updateProfile] Erro ao criar perfil:",f),f;return e}let{data:g,error:i}=await h.from("profiles").update(c).eq("id",b.id).select().single();if(i)throw console.error("❌ [updateProfile] Erro ao atualizar perfil:",i),i;return g}async function m(a,b){let c=await j();if(!c)throw Error("Usu\xe1rio n\xe3o autenticado");let{data:d,error:e}=await h.auth.signInWithPassword({email:c.email,password:a});if(e||!d.user)throw Error("Senha atual incorreta");let{error:f}=await h.auth.updateUser({password:b});if(f)throw console.error("❌ [changePassword] Erro ao atualizar senha:",f),f}async function n(a){let b=await j();if(!b)throw Error("Usu\xe1rio n\xe3o autenticado");if(!a.type.startsWith("image/"))throw Error("Apenas imagens s\xe3o permitidas");if(a.size>5242880)throw Error("A imagem deve ter no m\xe1ximo 5MB");let c=a.name.split(".").pop(),d=`${b.id}-${Date.now()}.${c}`,e=`avatars/${d}`,{data:f,error:g}=await h.storage.from("avatars").upload(e,a,{cacheControl:"3600",upsert:!0});if(g&&(g.message.includes("Bucket not found")||g.message.includes("not found")||g.message.includes("does not exist")))throw console.error('❌ [uploadAvatar] Bucket "avatars" n\xe3o encontrado no Supabase Storage'),Error('O bucket de armazenamento n\xe3o foi configurado.\n\nPor favor, crie o bucket "avatars" no Supabase Storage:\n1. Acesse o Dashboard do Supabase\n2. V\xe1 para Storage → Create bucket\n3. Nome: avatars\n4. P\xfablico: Sim\n5. Clique em Create\n\nAp\xf3s criar o bucket, tente novamente. Consulte o arquivo CRIAR_BUCKET_AVATARS.md para mais detalhes.');if(g){if(console.error("❌ [uploadAvatar] Erro ao fazer upload:",g),g.message.includes("File size exceeds")||g.message.includes("size"))throw Error("O arquivo \xe9 muito grande. O tamanho m\xe1ximo permitido \xe9 5MB.");if(g.message.includes("Invalid file type")||g.message.includes("file type"))throw Error("Tipo de arquivo inv\xe1lido. Apenas imagens (PNG, JPG, GIF, WEBP) s\xe3o permitidas.");if(g.message.includes("Unauthorized")||g.message.includes("permission")||g.message.includes("403"))throw Error('Erro de permiss\xe3o. Verifique se o bucket "avatars" est\xe1 configurado como p\xfablico no Supabase Storage.');else if(g.message.includes("duplicate")||g.message.includes("already exists")){let d=`${b.id}-${Date.now()}-${Math.random().toString(36).substring(7)}.${c}`,e=`avatars/${d}`,f=await h.storage.from("avatars").upload(e,a,{cacheControl:"3600",upsert:!1});if(f.error)throw Error(f.error.message||"Erro ao fazer upload da imagem. Tente novamente.");let{data:{publicUrl:g}}=h.storage.from("avatars").getPublicUrl(e),{error:i}=await h.from("profiles").update({avatar_url:g}).eq("id",b.id);return i&&console.error("❌ [uploadAvatar] Erro ao atualizar perfil:",i),g}throw Error(g.message||"Erro ao fazer upload da imagem. Tente novamente ou contate o suporte.")}let{data:{publicUrl:i}}=h.storage.from("avatars").getPublicUrl(e),{error:k}=await h.from("profiles").update({avatar_url:i}).eq("id",b.id);return k&&console.error("❌ [uploadAvatar] Erro ao atualizar perfil:",k),i}async function o(a,b,c){let d=await j();if(!d)throw Error("Usu\xe1rio n\xe3o autenticado");if(!c){let a=await y();a&&(c=a.id)}let f=b?(0,e.jZ)(b.trim(),200):(0,e.jZ)(a.persona.substring(0,50),200),g=(0,e.A_)(a.persona,1e4);if(!g.valid)throw Error(g.error||"Persona inv\xe1lida");let i=(0,e.A_)(a.objetivo,5e3);if(!i.valid)throw Error(i.error||"Objetivo inv\xe1lido");let k=(0,e.A_)(a.contextoNegocio||"",1e4),l=(0,e.A_)(a.contexto||"",1e4),m=a.regras.map(a=>(0,e.jZ)(a.trim(),1e3)).filter(a=>a.length>0);if(!["text","markdown","json","xml","yaml"].includes(a.formatoSaida))throw Error("Formato de sa\xedda inv\xe1lido");if(!["markdown","json"].includes(a.masterPromptFormat))throw Error("Formato do prompt mestre inv\xe1lido");if(a.promptSize<500||a.promptSize>1e5)throw Error("Tamanho do prompt deve estar entre 500 e 100000 caracteres");let{data:n,error:o}=await h.from("profiles").select("id").eq("id",d.id).single();if(o)throw console.error("❌ [createPrompt] Erro ao verificar profile:",o),o;if(!n)throw console.error("❌ [createPrompt] Profile n\xe3o encontrado para user_id:",d.id),Error("Perfil do usu\xe1rio n\xe3o encontrado. Por favor, fa\xe7a logout e login novamente.");let{data:p,error:q}=await h.from("prompts").insert({user_id:n.id,workspace_id:c||null,title:f,persona:g.sanitized||"",objetivo:i.sanitized||"",contexto_negocio:k.sanitized||"",contexto:l.sanitized||"",regras:m,formato_saida:a.formatoSaida,master_prompt_format:a.masterPromptFormat,estrutura_saida:(0,e.jZ)(a.estruturaSaida||"",5e3),prompt_size:a.promptSize}).select().single();if(q)throw console.error("❌ ERRO ao salvar prompt no banco:",{message:q.message,details:q.details,hint:q.hint,code:q.code}),q;let r=p.id;if(a.exemplos.length>0){let{error:b}=await h.from("few_shot_examples").insert(a.exemplos.map((a,b)=>({prompt_id:r,user_text:a.user,agent_text:a.agent,order_index:b})));if(b)throw console.error("❌ Erro ao salvar exemplos:",b),b}if(a.variaveisDinamicas.length>0){let{error:b}=await h.from("variaveis_dinamicas").insert(a.variaveisDinamicas.map((a,b)=>({prompt_id:r,chave:a.chave,valor:a.valor,order_index:b})));if(b)throw console.error("❌ Erro ao salvar vari\xe1veis:",b),b}if(a.ferramentas.length>0){let{error:b}=await h.from("ferramentas").insert(a.ferramentas.map((a,b)=>({prompt_id:r,nome:a.nome,descricao:a.descricao,order_index:b})));if(b)throw console.error("❌ Erro ao salvar ferramentas:",b),b}if(a.fluxos.length>0){let{error:b}=await h.from("fluxos").insert(a.fluxos.map((a,b)=>({prompt_id:r,nome:a.nome,tipo_prompt:a.tipoPrompt,objetivo:a.objetivo,base_conhecimento_rag:a.baseConhecimentoRAG,few_shot_examples:a.fewShotExamples,reforcar_cot:a.reforcarCoT,ativar_guardrails:a.ativarGuardrails,order_index:b})));if(b)throw console.error("❌ Erro ao salvar fluxos:",b),b}return p}async function p(a){if(!await j())throw Error("Usu\xe1rio n\xe3o autenticado");let b=await k();if(!b)throw Error("Perfil do usu\xe1rio n\xe3o encontrado");let c=h.from("prompts").select("*").eq("user_id",b.id);a&&(c=c.eq("workspace_id",a));let{data:d,error:e}=await c.eq("is_active",!0).order("created_at",{ascending:!1}).limit(20);if(e)throw console.error("❌ [getUserPrompts] Erro ao buscar prompts:",e),e;let f=d||[];return f.length>0&&f.forEach((a,b)=>{}),f}async function q(a){let b=await j();if(!b)throw Error("Usu\xe1rio n\xe3o autenticado");if(!(0,e.aJ)(a))throw Error("ID de prompt inv\xe1lido");let{data:c,error:d}=await h.from("profiles").select("id").eq("id",b.id).single();if(d)throw console.error("❌ [deletePrompt] Erro ao verificar profile:",d),d;if(!c)throw Error("Perfil do usu\xe1rio n\xe3o encontrado");let{error:f}=await h.from("prompts").update({is_active:!1}).eq("id",a).eq("user_id",c.id);if(f)throw console.error("❌ [deletePrompt] Erro ao deletar prompt:",f),f}async function r(a){let b=await j();if(!b)throw Error("Usu\xe1rio n\xe3o autenticado");if(!(0,e.aJ)(a))throw Error("ID de prompt inv\xe1lido");let{data:c,error:d}=await h.from("profiles").select("id").eq("id",b.id).single();if(d)throw console.error("❌ [getPrompt] Erro ao verificar profile:",d),d;if(!c)throw console.error("❌ [getPrompt] Profile n\xe3o encontrado para user_id:",b.id),Error("Perfil do usu\xe1rio n\xe3o encontrado");let{data:f,error:g}=await h.from("prompts").select("*").eq("id",a).eq("user_id",c.id).single();if(g)throw g;if(!f)throw Error("Prompt n\xe3o encontrado");let[i,k,l,m]=await Promise.all([h.from("few_shot_examples").select("*").eq("prompt_id",a).order("order_index"),h.from("variaveis_dinamicas").select("*").eq("prompt_id",a).order("order_index"),h.from("ferramentas").select("*").eq("prompt_id",a).order("order_index"),h.from("fluxos").select("*").eq("prompt_id",a).order("order_index")]),n={persona:f.persona,objetivo:f.objetivo,contextoNegocio:f.contexto_negocio||"",contexto:f.contexto||"",regras:f.regras||[],exemplos:(i.data||[]).map(a=>({id:a.id,user:a.user_text,agent:a.agent_text})),variaveisDinamicas:(k.data||[]).map(a=>({id:a.id,chave:a.chave,valor:a.valor})),ferramentas:(l.data||[]).map(a=>({id:a.id,nome:a.nome,descricao:a.descricao})),formatoSaida:f.formato_saida,masterPromptFormat:f.master_prompt_format,estruturaSaida:f.estrutura_saida||"",fluxos:(m.data||[]).map(a=>({id:a.id,nome:a.nome,tipoPrompt:a.tipo_prompt||"",objetivo:a.objetivo||"",baseConhecimentoRAG:a.base_conhecimento_rag||"",fewShotExamples:a.few_shot_examples||"",reforcarCoT:a.reforcar_cot||!1,ativarGuardrails:a.ativar_guardrails||!1})),promptSize:f.prompt_size||5e3};return{prompt:f,promptData:n}}async function s(a,b){if(!await j())throw Error("Usu\xe1rio n\xe3o autenticado");if(!(0,e.aJ)(a))throw Error("ID de prompt inv\xe1lido");let c=(0,e.A_)(b.content,1e5);if(!c.valid)throw Error(c.error||"Conte\xfado da vers\xe3o inv\xe1lido");let{data:d}=await h.from("prompt_versions").select("version_number").eq("prompt_id",a).order("version_number",{ascending:!1}).limit(1).single(),f=d?d.version_number+1:1,{data:g,error:i}=await h.from("prompt_versions").insert({prompt_id:a,version_number:f,content:c.sanitized||"",format:b.format,master_format:b.masterFormat,source_data:(0,e.Zm)(b.sourceData)}).select().single();if(i)throw console.error("❌ ERRO ao salvar vers\xe3o no banco:",{message:i.message,details:i.details,hint:i.hint,code:i.code}),i;return{id:g.id,version:g.version_number,content:g.content,format:g.format,masterFormat:g.master_format,timestamp:new Date(g.created_at).toLocaleString("pt-BR"),sourceData:g.source_data}}async function t(a){if(!(0,e.aJ)(a))throw Error("ID de prompt inv\xe1lido");let b=await k();if(!b)throw Error("Perfil do usu\xe1rio n\xe3o encontrado");let{data:c,error:d}=await h.from("prompt_versions").select("*, prompts!inner(user_id)").eq("prompts.user_id",b.id).eq("prompt_id",a).order("version_number",{ascending:!1}).limit(50);if(d)throw console.error("❌ Erro ao buscar vers\xf5es:",d),d;return c&&0!==c.length?(c||[]).map(a=>({id:a.id,version:a.version_number,content:a.content||"",format:a.format||"markdown",masterFormat:a.master_format||"markdown",timestamp:a.created_at?new Date(a.created_at).toLocaleString("pt-BR"):new Date().toLocaleString("pt-BR"),sourceData:a.source_data||{}})):[]}async function u(a){let b;if(!(0,e.aJ)(a))throw Error("ID de vers\xe3o inv\xe1lido");let{data:c,error:d}=await h.from("prompt_versions").select("*").eq("id",a).single();if(d)throw console.error("❌ [getPromptVersion] Erro ao buscar vers\xe3o:",d),d;if(!c)throw Error("Vers\xe3o n\xe3o encontrada");let{data:f,error:g}=await h.from("prompts").select("*").eq("id",c.prompt_id).single();if(g||!f)console.warn("⚠️ [getPromptVersion] Erro ao buscar prompt relacionado, usando dados m\xednimos:",g),b={persona:"",objetivo:"",contextoNegocio:"",contexto:"",regras:[],exemplos:[],variaveisDinamicas:[],ferramentas:[],formatoSaida:"text",masterPromptFormat:"markdown",estruturaSaida:"",fluxos:[],promptSize:5e3};else{let[a,c,d,e]=await Promise.all([h.from("few_shot_examples").select("*").eq("prompt_id",f.id).order("order_index"),h.from("variaveis_dinamicas").select("*").eq("prompt_id",f.id).order("order_index"),h.from("ferramentas").select("*").eq("prompt_id",f.id).order("order_index"),h.from("fluxos").select("*").eq("prompt_id",f.id).order("order_index")]);b={persona:f.persona||"",objetivo:f.objetivo||"",contextoNegocio:f.contexto_negocio||"",contexto:f.contexto||"",regras:f.regras||[],exemplos:(a.data||[]).map(a=>({id:a.id,user:a.user_text,agent:a.agent_text})),variaveisDinamicas:(c.data||[]).map(a=>({id:a.id,chave:a.chave,valor:a.valor})),ferramentas:(d.data||[]).map(a=>({id:a.id,nome:a.nome,descricao:a.descricao})),formatoSaida:f.formato_saida,masterPromptFormat:f.master_prompt_format,estruturaSaida:f.estrutura_saida||"",fluxos:(e.data||[]).map(a=>({id:a.id,nome:a.nome,tipoPrompt:a.tipo_prompt,objetivo:a.objetivo,baseConhecimentoRAG:a.base_conhecimento_rag||"",fewShotExamples:a.few_shot_examples||"",reforcarCoT:a.reforcar_cot||!1,ativarGuardrails:a.ativar_guardrails||!1})),promptSize:f.prompt_size||5e3}}return{id:c.id,version:c.version_number,content:c.content,format:c.format||"markdown",masterFormat:c.master_format||"markdown",timestamp:c.created_at?new Date(c.created_at).toLocaleString("pt-BR"):new Date().toLocaleString("pt-BR"),sourceData:b}}async function v(a,b){if(!await j())throw Error("Usu\xe1rio n\xe3o autenticado");if(!(0,e.aJ)(a))throw Error("ID de vers\xe3o de prompt inv\xe1lido");if(!b.author||!["user","agent"].includes(b.author))throw Error("Autor da mensagem inv\xe1lido");let c=(0,e.A_)(b.text,5e4);if(!c.valid)throw Error(c.error||"Texto da mensagem inv\xe1lido");let{data:d}=await h.from("chat_messages").select("order_index").eq("prompt_version_id",a).order("order_index",{ascending:!1}).limit(1).single(),f=d?d.order_index+1:0,{data:g,error:i}=await h.from("chat_messages").insert({prompt_version_id:a,author:b.author,text:c.sanitized||"",feedback:b.feedback,correction:b.correction?(0,e.jZ)(b.correction,5e3):null,order_index:f}).select().single();if(i)throw console.error("❌ ERRO ao salvar mensagem de chat no banco:",{message:i.message,details:i.details,hint:i.hint,code:i.code}),i;return g}async function w(a){if(!(0,e.aJ)(a))throw Error("ID de vers\xe3o de prompt inv\xe1lido");let b=await k();if(!b)throw Error("Perfil do usu\xe1rio n\xe3o encontrado");let{data:c,error:d}=await h.from("chat_messages").select("*, prompt_versions!inner(prompt_id, prompts!inner(user_id))").eq("prompt_versions.prompts.user_id",b.id).eq("prompt_version_id",a).order("order_index",{ascending:!0}).limit(100);if(d)throw console.error("❌ Erro ao buscar mensagens:",d),d;return c&&0!==c.length?(c||[]).map(a=>({author:"user"===a.author||"agent"===a.author?a.author:"user",text:a.text||"",feedback:a.feedback,isEditing:!1,correction:a.correction||void 0})):[]}async function x(){let a=await j();if(!a)throw Error("Usu\xe1rio n\xe3o autenticado");let{data:b,error:c}=await h.from("workspaces").select("*").eq("user_id",a.id).eq("is_active",!0).order("is_default",{ascending:!1}).order("created_at",{ascending:!1});if(c)throw console.error("❌ [getUserWorkspaces] Erro ao buscar workspaces:",c),c;return b||[]}async function y(){let a=await j();if(!a)throw Error("Usu\xe1rio n\xe3o autenticado");let{data:b,error:c}=await h.from("workspaces").select("*").eq("user_id",a.id).eq("is_active",!0).eq("is_default",!0).single();if(c){if("PGRST116"===c.code)return await z();throw console.error("❌ [getDefaultWorkspace] Erro ao buscar workspace padr\xe3o:",c),c}return b}async function z(){let a=await j();if(!a)throw Error("Usu\xe1rio n\xe3o autenticado");let{data:b,error:c}=await h.from("workspaces").insert({user_id:a.id,name:"Meu Workspace",description:"Workspace padr\xe3o",is_active:!0,is_default:!0}).select().single();if(c)throw console.error("❌ [createDefaultWorkspace] Erro ao criar workspace padr\xe3o:",c),c;return b}async function A(a,b){let c=await j();if(!c)throw Error("Usu\xe1rio n\xe3o autenticado");let d=(0,e.jZ)(a.trim(),100);if(!d||0===d.length)throw Error("Nome do workspace n\xe3o pode estar vazio");let{data:f,error:g}=await h.from("workspaces").insert({user_id:c.id,name:d,description:b?(0,e.jZ)(b.trim(),500):null,is_active:!0,is_default:!1}).select().single();if(g)throw console.error("❌ [createWorkspace] Erro ao criar workspace:",g),g;return f}async function B(a,b){let c=await j();if(!c)throw Error("Usu\xe1rio n\xe3o autenticado");if(!(0,e.aJ)(a))throw Error("ID de workspace inv\xe1lido");let d={};if(void 0!==b.name){let a=(0,e.jZ)(b.name.trim(),100);if(!a||0===a.length)throw Error("Nome do workspace n\xe3o pode estar vazio");d.name=a}void 0!==b.description&&(d.description=b.description?(0,e.jZ)(b.description.trim(),500):null),d.updated_at=new Date().toISOString();let{data:f,error:g}=await h.from("workspaces").update(d).eq("id",a).eq("user_id",c.id).select().single();if(g)throw console.error("❌ [updateWorkspace] Erro ao atualizar workspace:",g),g;return f}async function C(a){let b=await j();if(!b)throw Error("Usu\xe1rio n\xe3o autenticado");if(!(0,e.aJ)(a))throw Error("ID de workspace inv\xe1lido");let{error:c}=await h.from("workspaces").update({is_default:!1}).eq("user_id",b.id).eq("is_default",!0);if(c)throw console.error("❌ [setDefaultWorkspace] Erro ao desmarcar workspaces padr\xe3o:",c),c;let{error:d}=await h.from("workspaces").update({is_default:!0}).eq("id",a).eq("user_id",b.id);if(d)throw console.error("❌ [setDefaultWorkspace] Erro ao definir workspace como padr\xe3o:",d),d}async function D(a){let b=await j();if(!b)throw Error("Usu\xe1rio n\xe3o autenticado");if(!(0,e.aJ)(a))throw Error("ID de workspace inv\xe1lido");let{data:c,error:d}=await h.from("workspaces").select("is_default").eq("id",a).eq("user_id",b.id).single();if(d)throw console.error("❌ [deleteWorkspace] Erro ao buscar workspace:",d),d;if(c?.is_default)throw Error("N\xe3o \xe9 poss\xedvel deletar o workspace padr\xe3o. Crie outro workspace e defina-o como padr\xe3o primeiro.");let{error:f}=await h.from("workspaces").update({is_active:!1}).eq("id",a).eq("user_id",b.id);if(f)throw console.error("❌ [deleteWorkspace] Erro ao deletar workspace:",f),f}f&&g||console.warn("⚠️ Supabase n\xe3o configurado corretamente. A autentica\xe7\xe3o pode falhar.")},41059:(a,b,c)=>{"use strict";c.d(b,{A_:()=>n,DT:()=>j,Eb:()=>f,Gg:()=>p,Hc:()=>s,Oj:()=>k,PO:()=>g,Zm:()=>i,aJ:()=>m,h4:()=>o,jZ:()=>h,yS:()=>l,zf:()=>r});let d=new Map,e={MAX_LOGIN_ATTEMPTS:5,BLOCK_DURATION_MINUTES:15,WINDOW_MINUTES:15,MAX_REQUESTS_PER_MINUTE:60,MAX_SIGNUP_PER_HOUR:5};function f(a,b){let c=Date.now(),f=d.get(a);if(!f)return d.set(a,{attempts:1,resetTime:c+60*e.WINDOW_MINUTES*1e3,blocked:!1}),{allowed:!0};if(f.blocked&&c<f.resetTime)return{allowed:!1,retryAfter:Math.ceil((f.resetTime-c)/1e3/60)};if(c>f.resetTime)return d.set(a,{attempts:1,resetTime:c+60*e.WINDOW_MINUTES*1e3,blocked:!1}),{allowed:!0};let g="login"===b?e.MAX_LOGIN_ATTEMPTS:"signup"===b?e.MAX_SIGNUP_PER_HOUR:e.MAX_REQUESTS_PER_MINUTE;return f.attempts>=g?(f.blocked=!0,f.resetTime=c+60*e.BLOCK_DURATION_MINUTES*1e3,{allowed:!1,retryAfter:e.BLOCK_DURATION_MINUTES}):(f.attempts++,{allowed:!0})}function g(a){d.delete(a)}function h(a,b=1e4){if(!a||"string"!=typeof a)return"";let c=a.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/javascript:/gi,"").replace(/on\w+=/gi,"").replace(/[\x00-\x1F\x7F]/g,"").trim();return c.length>b&&(c=c.substring(0,b)),c}function i(a){let b={...a};for(let a of["__proto__","constructor","prototype"])delete b[a];return b}setInterval(function(){let a=Date.now();for(let[b,c]of d.entries())a>c.resetTime&&!c.blocked&&d.delete(b)},18e5);let j=function(a){return!!a&&"string"==typeof a&&/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(a)&&a.length<=254};function k(a){let b=[];if(!a||"string"!=typeof a)return{valid:!1,errors:["Senha \xe9 obrigat\xf3ria"],strength:"weak"};a.length<8&&b.push("Senha deve ter pelo menos 8 caracteres"),a.length>128&&b.push("Senha muito longa (m\xe1ximo 128 caracteres)");let c=/[A-Z]/.test(a),d=/[a-z]/.test(a),e=/\d/.test(a),f=/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(a);c||b.push("Senha deve conter pelo menos uma letra mai\xfascula"),d||b.push("Senha deve conter pelo menos uma letra min\xfascula"),e||b.push("Senha deve conter pelo menos um n\xfamero"),f||b.push("Senha deve conter pelo menos um caractere especial"),["password","12345678","qwerty","abc123","password123","admin","senha","123456","123456789","1234567890"].some(b=>a.toLowerCase().includes(b))&&b.push("Senha muito comum. Escolha uma senha mais segura");let g="weak",h=[c,d,e,f,a.length>=12].filter(Boolean).length;return h>=4&&a.length>=12?g="strong":h>=3&&(g="medium"),{valid:0===b.length,errors:b,strength:g}}function l(a){return a&&"string"==typeof a?a.length<2?{valid:!1,error:"Nome deve ter pelo menos 2 caracteres"}:a.length>100?{valid:!1,error:"Nome muito longo (m\xe1ximo 100 caracteres)"}:/^[a-zA-ZÀ-ÿ\u00f1\u00d1\s\-']+$/.test(a)?{valid:!0}:{valid:!1,error:"Nome cont\xe9m caracteres inv\xe1lidos"}:{valid:!1,error:"Nome \xe9 obrigat\xf3rio"}}function m(a){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(a)}function n(a,b=5e4){return a&&"string"==typeof a?a.length>b?{valid:!1,error:`Texto muito longo (m\xe1ximo ${b} caracteres)`}:{valid:!0,sanitized:h(a,b)}:{valid:!1,error:"Texto \xe9 obrigat\xf3rio"}}function o(a){console.warn("\uD83D\uDD12 Security Event:",a)}function p(a){return a.size>0xa00000?{valid:!1,error:`Arquivo muito grande. Tamanho m\xe1ximo: 10MB`}:{valid:!0}}let q=["application/pdf","text/plain","text/markdown","text/x-markdown","text/html","text/csv","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"];function r(a){return q.includes(a.type)||a.name.toLowerCase().endsWith(".md")||a.name.toLowerCase().endsWith(".txt")||a.name.toLowerCase().endsWith(".csv")||a.name.toLowerCase().endsWith(".xlsx")||a.name.toLowerCase().endsWith(".xls")?{valid:!0}:{valid:!1,error:"Tipo de arquivo n\xe3o permitido. Use PDF, TXT, MD, HTML, CSV, XLSX, XLS, DOC ou DOCX."}}function s(a,b){return b?`${a||"anonymous"}_${b}`:a||"anonymous"}},63375:()=>{},63683:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,81170,23)),Promise.resolve().then(c.t.bind(c,23597,23)),Promise.resolve().then(c.t.bind(c,36893,23)),Promise.resolve().then(c.t.bind(c,89748,23)),Promise.resolve().then(c.t.bind(c,6060,23)),Promise.resolve().then(c.t.bind(c,7184,23)),Promise.resolve().then(c.t.bind(c,69576,23)),Promise.resolve().then(c.t.bind(c,73041,23)),Promise.resolve().then(c.t.bind(c,51384,23))},82704:()=>{}};