(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[954],{3265:(e,r,s)=>{Promise.resolve().then(s.bind(s,4315))},3997:(e,r,s)=>{"use strict";s.d(r,{$H:()=>l,JE:()=>o,QB:()=>i,ZZ:()=>d,_X:()=>n,dE:()=>h,jm:()=>a,nV:()=>c,vD:()=>u,xj:()=>m});var t=s(3217);async function a(){try{let{data:{session:e}}=await t.ND.auth.getSession();if(!(null==e?void 0:e.user))return!1;let r=e.user.email,{data:s,error:a}=await t.ND.from("admin_users").select("role, email, is_active").eq("user_id",e.user.id).eq("is_active",!0).maybeSingle();if(a&&"PGRST116"!==a.code){if(console.error("❌ [isSuperAdmin] Erro na query:",a),"brunocostaads23@gmail.com"===r){console.warn("⚠️ [isSuperAdmin] Admin n\xe3o encontrado na tabela, mas email \xe9 admin master. Criando registro...");try{let{error:s}=await t.ND.from("admin_users").insert({user_id:e.user.id,email:r,role:"super_admin",can_manage_tenants:!0,can_manage_subscriptions:!0,can_view_analytics:!0,is_active:!0});if(!s)return!0}catch(e){console.error("❌ [isSuperAdmin] Erro ao criar registro de admin:",e)}}return!1}if(!s){if(console.warn("⚠️ [isSuperAdmin] Nenhum registro de admin encontrado"),"brunocostaads23@gmail.com"===r)return!0;return!1}return"super_admin"===s.role}catch(e){return console.error("❌ [isSuperAdmin] Erro ao verificar super admin:",e),console.error("❌ [isSuperAdmin] Stack:",e.stack),!1}}async function n(){try{let{data:e,error:r}=await t.ND.from("tenants").select("*").order("created_at",{ascending:!1}).limit(50);if(r)throw r;return e||[]}catch(e){throw console.error("❌ Erro ao listar tenants:",e),e}}async function o(e){try{let{data:r,error:s}=await t.ND.from("tenants").insert({name:e.name,slug:e.slug,email:e.email||null,phone:e.phone||null,is_active:!0}).select().single();if(s)throw s;return r}catch(e){throw console.error("❌ Erro ao criar tenant:",e),e}}async function i(e,r){try{let{data:s,error:a}=await t.ND.from("tenants").update(r).eq("id",e).select().single();if(a)throw a;return s}catch(e){throw console.error("❌ Erro ao atualizar tenant:",e),e}}async function l(){try{let{data:e,error:r}=await t.ND.from("subscriptions").select("\n        *,\n        plan:plans(*),\n        user:profiles(id, email, full_name)\n      ").order("created_at",{ascending:!1}).limit(50);if(r)throw r;return e||[]}catch(e){throw console.error("❌ Erro ao listar subscriptions:",e),e}}async function c(e,r){try{let{data:s,error:a}=await t.ND.from("subscriptions").update(r).eq("id",e).select("\n        *,\n        plan:plans(*)\n      ").single();if(a)throw a;return s}catch(e){throw console.error("❌ Erro ao atualizar subscription:",e),e}}async function d(){try{let{data:e,error:r}=await t.ND.from("profiles").select("\n        id, \n        email, \n        full_name,\n        subscriptions (\n          id,\n          plan_id,\n          status,\n          trial_ends_at,\n          subscription_ends_at,\n          is_active\n        )\n      ").order("created_at",{ascending:!1}).limit(50);if(r)throw r;if(!e)return[];return e.map(e=>{var r;let s=(null==(r=e.subscriptions)?void 0:r.find(e=>!0===e.is_active))||null;return{id:e.id,email:e.email,full_name:e.full_name,subscription:s?{id:s.id,plan_id:s.plan_id,status:s.status,trial_ends_at:s.trial_ends_at,subscription_ends_at:s.subscription_ends_at}:null}})}catch(e){throw console.error("❌ Erro ao listar usu\xe1rios:",e),e}}async function m(e){try{let{data:r,error:s}=await t.ND.auth.admin.createUser({email:e.email,password:e.password,email_confirm:!0,user_metadata:{full_name:e.fullName}});if(s)throw console.error("❌ Erro ao criar usu\xe1rio:",s),Error("Erro ao criar usu\xe1rio: ".concat(s.message));if(!r.user)throw Error("Usu\xe1rio n\xe3o foi criado corretamente");let a=r.user.id,{error:n}=await t.ND.from("profiles").upsert({id:a,email:e.email,full_name:e.fullName});n&&console.warn("⚠️ Erro ao criar perfil (pode j\xe1 existir):",n);let{data:o,error:i}=await t.ND.from("plans").select("id").eq("name","premium").single();if(i||!o)throw console.error("❌ Plano premium n\xe3o encontrado:",i),Error("Plano premium n\xe3o encontrado no banco de dados");let{error:l}=await t.ND.from("subscriptions").insert({user_id:a,plan_id:o.id,status:"active",is_active:!0,subscription_started_at:new Date().toISOString()});if(l)throw console.error("❌ Erro ao criar subscription:",l),Error("Erro ao criar subscription premium: ".concat(l.message));return{userId:a,message:"Usu\xe1rio ".concat(e.email," criado com sucesso e subscription premium ativada!")}}catch(e){throw console.error("❌ Erro ao criar usu\xe1rio com premium:",e),e}}async function u(e,r){try{let{data:s,error:a}=await t.ND.from("plans").select("id, trial_days").eq("name",r).single();if(a||!s)throw Error("Plano ".concat(r," n\xe3o encontrado"));await t.ND.from("subscriptions").update({is_active:!1}).eq("user_id",e);let n={user_id:e,plan_id:s.id,is_active:!0};if("trial"===r&&s.trial_days){let e=new Date,r=new Date(e);r.setDate(r.getDate()+s.trial_days),n.status="trial",n.trial_started_at=e.toISOString(),n.trial_ends_at=r.toISOString()}else n.status="active",n.subscription_started_at=new Date().toISOString();let{error:o}=await t.ND.from("subscriptions").insert(n);if(o)throw Error("Erro ao criar nova subscription: ".concat(o.message));return{message:"Plano alterado para ".concat("premium"===r?"Premium":"Trial"," com sucesso!")}}catch(e){throw console.error("❌ Erro ao alterar plano:",e),e}}async function h(){try{let[{count:e},{count:r},{count:s},{count:a},{count:n}]=await Promise.all([t.ND.from("profiles").select("*",{count:"exact",head:!0}),t.ND.from("subscriptions").select("*",{count:"exact",head:!0}).eq("is_active",!0),t.ND.from("subscriptions").select("*",{count:"exact",head:!0}).eq("is_active",!0).eq("status","trial"),t.ND.from("subscriptions").select("*",{count:"exact",head:!0}).eq("is_active",!0).eq("status","active"),t.ND.from("tenants").select("*",{count:"exact",head:!0})]);return{totalUsers:e||0,activeSubscriptions:r||0,trialUsers:s||0,premiumUsers:a||0,totalTenants:n||0}}catch(e){throw console.error("❌ Erro ao buscar estat\xedsticas:",e),e}}},4315:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>x});var t=s(5155),a=s(2115),n=s(63),o=s(8525),i=s(3217),l=s(3997),c=s(5024);let d=()=>{let[e,r]=(0,a.useState)(null),[s,n]=(0,a.useState)(null),[o,i]=(0,a.useState)(null),[l,d]=(0,a.useState)(!0);if((0,a.useEffect)(()=>{(async()=>{try{let[e,s,t]=await Promise.all([(0,c.Ty)(),(0,c.zN)(),(0,c.vQ)()]);r(e),n(s),i(t),e||(console.warn("⚠️ [SubscriptionInfo] Nenhuma informa\xe7\xe3o de plano encontrada. Usando valores padr\xe3o do trial."),console.warn("\uD83D\uDCA1 [SubscriptionInfo] Execute o script CORRIGIR_SAAS_COMPLETO.sql no Supabase SQL Editor."))}catch(e){console.error("❌ [SubscriptionInfo] Erro ao carregar informa\xe7\xf5es da assinatura:",e),console.error("❌ [SubscriptionInfo] Erro detalhado:",e.message,e.stack),d(!1)}finally{d(!1)}})()},[]),l)return(0,t.jsx)("div",{className:"bg-white/5 backdrop-blur-sm rounded-xl p-4 border border-white/10",children:(0,t.jsxs)("div",{className:"animate-pulse",children:[(0,t.jsx)("div",{className:"h-4 bg-white/10 rounded w-1/3 mb-2"}),(0,t.jsx)("div",{className:"h-4 bg-white/10 rounded w-1/2"})]})});if(!e||!s||!o)return(0,t.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm rounded-xl p-5 border border-white/10 shadow-xl",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-4 pb-4 border-b border-white/10",children:(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,t.jsx)("h3",{className:"text-white font-bold text-base",children:"Trial Gr\xe1tis"}),(0,t.jsx)("span",{className:"px-2 py-0.5 bg-emerald-500/20 border border-emerald-500/50 rounded text-emerald-400 text-xs font-bold",children:"TRIAL"})]}),(0,t.jsx)("p",{className:"text-emerald-400 text-sm font-medium mt-1",children:"⏰ 7 dias restantes"})]})}),(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("span",{className:"text-white/60 text-xs",children:"Tokens do M\xeas"}),(0,t.jsx)("span",{className:"text-white/80 text-xs font-medium",children:"0 / 1.000.000 tokens/m\xeas"})]}),(0,t.jsx)("div",{className:"w-full bg-white/10 rounded-full h-2",children:(0,t.jsx)("div",{className:"h-2 rounded-full transition-all bg-emerald-500",style:{width:"0%"}})})]}),(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("span",{className:"text-white/60 text-xs",children:"Vers\xf5es do M\xeas"}),(0,t.jsx)("span",{className:"text-white/80 text-xs font-medium",children:"0 / M\xe1x. 4 vers\xf5es/m\xeas"})]}),(0,t.jsx)("div",{className:"w-full bg-white/10 rounded-full h-2",children:(0,t.jsx)("div",{className:"h-2 rounded-full transition-all bg-emerald-500",style:{width:"0%"}})})]}),(0,t.jsx)("div",{className:"pt-3 border-t border-white/10 space-y-2",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-white/60 text-xs",children:"Compartilhar Chat"}),(0,t.jsx)("svg",{className:"w-4 h-4 text-white/40",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})})]});let m=-1===e.maxTokens?"Ilimitado":"".concat(e.maxTokens.toLocaleString("pt-BR")," tokens/m\xeas"),u=-1===e.maxVersions?"Ilimitado":"M\xe1x. ".concat(e.maxVersions," vers\xf5es/m\xeas");return(0,t.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm rounded-xl p-3 sm:p-4 border border-white/10 shadow-xl w-full",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 pb-4 border-b border-white/10 gap-2",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-1 flex-wrap",children:[(0,t.jsx)("h3",{className:"text-white font-bold text-sm sm:text-base truncate",children:e.displayName}),e.isTrial&&(0,t.jsx)("span",{className:"px-2 py-0.5 bg-emerald-500/20 border border-emerald-500/50 rounded text-emerald-400 text-xs font-bold",children:"TRIAL"})]}),e.isTrial&&null!==e.trialDaysLeft&&(0,t.jsxs)("p",{className:"text-emerald-400 text-xs sm:text-sm font-medium mt-1",children:["⏰ ",e.trialDaysLeft," ",1===e.trialDaysLeft?"dia":"dias"," restantes"]}),!e.isTrial&&(0,t.jsx)("p",{className:"text-white/60 text-xs mt-1",children:"Plano ativo"})]}),!e.isTrial&&(0,t.jsx)("a",{href:"https://wa.me/5511999999999?text=Ol\xe1! Gostaria de fazer upgrade do meu plano.",target:"_blank",rel:"noopener noreferrer",className:"text-xs sm:text-sm text-emerald-400 hover:text-emerald-300 underline whitespace-nowrap flex-shrink-0",children:"Upgrade"})]}),(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("span",{className:"text-white/60 text-xs",children:"Tokens do M\xeas"}),(0,t.jsxs)("span",{className:"text-white/80 text-xs font-medium",children:[s.tokensUsed.toLocaleString("pt-BR")," / ",m]})]}),(0,t.jsx)("div",{className:"w-full bg-white/10 rounded-full h-2",children:(0,t.jsx)("div",{className:"h-2 rounded-full transition-all ".concat(s.percentage>=90?"bg-red-500":s.percentage>=70?"bg-amber-500":"bg-emerald-500"),style:{width:"".concat(Math.min(s.percentage,100),"%")}})})]}),(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("span",{className:"text-white/60 text-xs",children:"Vers\xf5es do M\xeas"}),(0,t.jsxs)("span",{className:"text-white/80 text-xs font-medium",children:[o.versionsCount," / ",u]})]}),(0,t.jsx)("div",{className:"w-full bg-white/10 rounded-full h-2",children:(0,t.jsx)("div",{className:"h-2 rounded-full transition-all ".concat(o.canCreateMore?o.versionsCount/(e.maxVersions||1)>=.75?"bg-amber-500":"bg-emerald-500":"bg-red-500"),style:{width:"".concat(-1===e.maxVersions?0:Math.min(o.versionsCount/e.maxVersions*100,100),"%")}})}),!o.canCreateMore&&-1!==e.maxVersions&&(0,t.jsx)("p",{className:"text-red-400 text-xs mt-1",children:"Limite atingido. Fa\xe7a upgrade para criar mais vers\xf5es."})]}),(0,t.jsx)("div",{className:"pt-3 border-t border-white/10 space-y-2",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-white/60 text-xs",children:"Compartilhar Chat"}),e.canShareChat?(0,t.jsx)("svg",{className:"w-4 h-4 text-emerald-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):(0,t.jsx)("svg",{className:"w-4 h-4 text-white/40",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})})]})},m=e=>{let{isMobileOpen:r,onMobileClose:s}=e,c=(0,n.useRouter)(),m=(0,n.usePathname)(),u=(0,o.U)(),[h,x]=(0,a.useState)(null),[p,f]=(0,a.useState)(null),[b,w]=(0,a.useState)(null),[v,g]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{let{data:{session:e}}=await u.auth.getSession();if(null==e?void 0:e.user){x(e.user.email||null);try{let e=await (0,i.Rk)();e&&(f(e.full_name||null),w(e.avatar_url||null));let r=await (0,l.jm)();g(r)}catch(e){console.error("Erro ao buscar perfil:",e)}}})();let{data:{subscription:e}}=u.auth.onAuthStateChange((e,r)=>{(null==r?void 0:r.user)?(x(r.user.email||null),(0,i.Rk)().then(e=>{e&&(f(e.full_name||null),w(e.avatar_url||null))}).catch(()=>{}),(0,l.jm)().then(e=>{g(e)}).catch(e=>{console.error("❌ [Sidebar] Erro ao verificar admin:",e)})):(x(null),f(null),w(null))}),r=async()=>{try{let e=await (0,i.Rk)();e&&(f(e.full_name||null),w(e.avatar_url||null))}catch(e){console.error("Erro ao atualizar perfil no Sidebar:",e)}};return window.addEventListener("profileUpdated",r),()=>{e.unsubscribe(),window.removeEventListener("profileUpdated",r)}},[]);let j=async()=>{try{await (0,i.CI)(),c.push("/login")}catch(e){console.error("Erro ao fazer logout:",e)}},N=[{label:"Workspace",icon:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),path:"/dashboard",active:"/dashboard"===m},{label:"Reposit\xf3rio",icon:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})}),path:"/dashboard/repository",active:"/dashboard/repository"===m},{label:"Configura\xe7\xf5es",icon:(0,t.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),path:"/dashboard/settings",active:"/dashboard/settings"===m},...v?[{label:"Admin Master",icon:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),path:"/admin",active:"/admin"===m}]:[]];return(0,t.jsxs)(t.Fragment,{children:[r&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-40 lg:hidden",onClick:s}),(0,t.jsxs)("aside",{className:"\n          fixed top-0 left-0 h-full w-72 bg-black border-r border-white/5 z-50 transform transition-transform duration-300 ease-in-out\n          ".concat(r?"translate-x-0":"-translate-x-full","\n          lg:translate-x-0 lg:static lg:z-auto\n          flex flex-col shadow-2xl\n        "),children:[(0,t.jsx)("div",{className:"p-6 border-b border-white/5",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-emerald-400 to-green-500 rounded-lg flex items-center justify-center shadow-lg shadow-emerald-500/30",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-black",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-xl font-bold text-white tracking-tight",children:"LaBPrompT"}),(0,t.jsx)("p",{className:"text-xs text-white/40",children:"IA Engineering"})]})]})}),(0,t.jsx)("nav",{className:"flex-1 px-4 py-6 space-y-1 overflow-y-auto",children:N.map(e=>(0,t.jsxs)("button",{onClick:()=>{c.push(e.path),s()},className:"\n                w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-all duration-200 group\n                ".concat(e.active?"bg-white/5 text-emerald-400 border border-emerald-500/20 shadow-lg shadow-emerald-500/10":"text-white/60 hover:text-white hover:bg-white/5 border border-transparent","\n              "),children:[(0,t.jsx)("span",{className:e.active?"text-emerald-400":"text-white/40 group-hover:text-emerald-400/60",children:e.icon}),(0,t.jsx)("span",{className:"font-medium text-sm",children:e.label})]},e.path))}),(0,t.jsx)("div",{className:"px-4 pb-4 border-t border-white/5 pt-4",children:(0,t.jsx)(d,{})}),(0,t.jsxs)("div",{className:"p-4 border-t border-white/5",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 p-3 rounded-lg bg-white/5 border border-white/5 mb-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-amber-400 to-yellow-500 rounded-full flex items-center justify-center text-black font-bold text-sm shadow-lg shadow-amber-500/30 overflow-hidden border-2 border-white/20",children:b?(0,t.jsx)("img",{src:b,alt:"Avatar",className:"w-full h-full object-cover"}):p?p.charAt(0).toUpperCase():(null==h?void 0:h.charAt(0).toUpperCase())||"U"}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-white truncate",children:p||"Usu\xe1rio"}),v&&(0,t.jsx)("span",{className:"px-2 py-0.5 bg-gradient-to-r from-amber-500/20 to-yellow-500/20 border border-amber-500/50 rounded text-amber-400 text-xs font-bold",children:"ADMIN"})]}),(0,t.jsx)("p",{className:"text-xs text-white/40 truncate",children:h||""})]})]}),(0,t.jsx)("button",{onClick:j,className:"w-full px-4 py-2.5 bg-white/5 hover:bg-white/10 text-white/80 hover:text-white rounded-lg transition-all duration-200 border border-white/5 hover:border-white/10 text-sm font-medium",children:"Sair"})]})]})]})},u=()=>{let[e,r]=(0,a.useState)(null),[s,n]=(0,a.useState)(!0);if((0,a.useEffect)(()=>{(async()=>{try{let e=await (0,c.Ty)();r(e),e||(console.warn("⚠️ [TrialBanner] Nenhuma informa\xe7\xe3o de plano encontrada. Verifique se a subscription foi criada."),console.warn("\uD83D\uDCA1 [TrialBanner] Execute o script CORRIGIR_SAAS_COMPLETO.sql no Supabase SQL Editor."))}catch(e){console.error("❌ [TrialBanner] Erro ao carregar informa\xe7\xf5es do plano:",e),console.error("❌ [TrialBanner] Erro detalhado:",e.message,e.stack)}finally{n(!1)}})()},[]),s)return(0,t.jsx)("div",{className:"w-full px-4 py-3 mb-4 rounded-lg border bg-white/5 border-white/10 animate-pulse",children:(0,t.jsx)("div",{className:"h-4 bg-white/10 rounded w-1/3"})});if(!e)return(0,t.jsx)("div",{className:"w-full px-4 py-3 mb-4 rounded-lg border bg-emerald-500/20 border-emerald-500/50",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("svg",{className:"w-5 h-5 text-emerald-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v13m0-13V6a2 2 0 112 2h-2zm0 0V5.5A2.5 2.5 0 109.5 8H12zm-7 4h14M5 12a2 2 0 110-4h14a2 2 0 110 4M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"text-emerald-400 font-semibold text-sm",children:"\uD83C\uDF89 Teste Gr\xe1tis de 7 Dias Ativo!"}),(0,t.jsx)("p",{className:"text-white/60 text-xs mt-1",children:"Sua assinatura trial foi criada automaticamente. Aproveite todos os recursos!"})]})]})});let o=e.trialDaysLeft||0,i=o<=3&&o>0,l=1===o;return e.isTrial?(0,t.jsx)("div",{className:"w-full px-3 sm:px-4 md:px-5 py-3 sm:py-3.5 md:py-4 rounded-xl border shadow-lg ".concat(l?"bg-red-500/20 border-red-500/50":i?"bg-amber-500/20 border-amber-500/50":"bg-emerald-500/20 border-emerald-500/50"),children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-4",children:[(0,t.jsxs)("div",{className:"flex items-start sm:items-center space-x-2 sm:space-x-3 flex-1 min-w-0",children:[l?(0,t.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-red-400 flex-shrink-0 mt-0.5 sm:mt-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}):i?(0,t.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-amber-400 flex-shrink-0 mt-0.5 sm:mt-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}):(0,t.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-emerald-400 flex-shrink-0 mt-0.5 sm:mt-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v13m0-13V6a2 2 0 112 2h-2zm0 0V5.5A2.5 2.5 0 109.5 8H12zm-7 4h14M5 12a2 2 0 110-4h14a2 2 0 110 4M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"})}),(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,t.jsx)("p",{className:"font-semibold text-sm sm:text-base leading-tight ".concat(l?"text-red-400":i?"text-amber-400":"text-emerald-400"),children:l?"⚠️ \xdaltimo dia do seu trial gr\xe1tis!":i?"⏰ Seu trial gr\xe1tis expira em ".concat(o," ").concat(1===o?"dia":"dias"):"\uD83C\uDF89 Voc\xea est\xe1 no trial gr\xe1tis! ".concat(o," ").concat(1===o?"dia":"dias"," restantes")}),(0,t.jsxs)("p",{className:"text-white/60 text-xs sm:text-sm mt-1 leading-snug",children:[e.displayName," • Teste completo da plataforma"]})]})]}),(0,t.jsx)("a",{href:"https://wa.me/5511999999999?text=Ol\xe1! Gostaria de fazer upgrade do meu plano.",target:"_blank",rel:"noopener noreferrer",className:"px-4 sm:px-5 py-2 sm:py-2.5 bg-emerald-500 hover:bg-emerald-600 text-black font-semibold rounded-lg transition-all duration-200 text-xs sm:text-sm whitespace-nowrap shadow-lg shadow-emerald-500/20 hover:shadow-emerald-500/30 hover:scale-105",children:"Fazer Upgrade"})]})}):(0,t.jsx)("div",{className:"w-full px-4 py-3 mb-4 rounded-lg border bg-emerald-500/20 border-emerald-500/50",children:(0,t.jsx)("div",{className:"flex items-center justify-between flex-wrap gap-2",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("svg",{className:"w-5 h-5 text-emerald-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"font-semibold text-emerald-400",children:["✅ Plano Ativo: ",e.displayName]}),(0,t.jsx)("p",{className:"text-white/60 text-sm mt-1",children:"Aproveite todos os recursos do seu plano"})]})]})})})},h=()=>{let e=(0,o.U)(),[r,s]=(0,a.useState)({hasSession:!1,userId:null,hasSubscription:!1,subscriptionData:null,error:null});if((0,a.useEffect)(()=>{(async()=>{try{let{data:{session:a},error:n}=await e.auth.getSession();if(n)return void s(e=>({...e,error:"Erro de sess\xe3o: ".concat(n.message)}));if(!(null==a?void 0:a.user))return void s(e=>({...e,error:"Nenhuma sess\xe3o ativa"}));let o=a.user.id,{data:i,error:l}=await e.from("subscriptions").select("*, plan:plans(*)").eq("user_id",o).eq("is_active",!0).order("created_at",{ascending:!1}).limit(1).maybeSingle();if(l){var r,t;if((null==(r=l.message)?void 0:r.includes("infinite recursion"))||(null==(t=l.message)?void 0:t.includes("recursion"))||"42P17"===l.code){console.error("❌ [DiagnosticPanel] Erro de recurs\xe3o infinita nas pol\xedticas RLS:",l),s(e=>({...e,hasSession:!0,userId:o,error:'Erro ao buscar subscription: infinite recursion detected in policy for relation "admin_users". Execute o script CORRIGIR_RLS_ADMIN_USERS_FINAL.sql no Supabase SQL Editor para corrigir. (⚠️ Use o arquivo FINAL, n\xe3o o antigo!)'}));return}if("PGRST116"!==l.code){console.error("❌ [DiagnosticPanel] Erro ao buscar subscription:",l),s(e=>({...e,hasSession:!0,userId:o,error:"Erro ao buscar subscription: ".concat(l.message)}));return}}s({hasSession:!0,userId:o,hasSubscription:!!i,subscriptionData:i,error:null})}catch(e){console.error("❌ [DiagnosticPanel] Erro nos diagn\xf3sticos:",e),s(r=>({...r,error:e.message||"Erro desconhecido"}))}})()},[]),!r.hasSession)return(0,t.jsxs)("div",{className:"bg-red-500/20 border border-red-500/50 rounded-xl p-4 mb-4",children:[(0,t.jsx)("p",{className:"text-red-400 font-semibold",children:"⚠️ Nenhuma sess\xe3o ativa"}),(0,t.jsx)("p",{className:"text-red-300 text-sm mt-1",children:r.error})]});if(r.error){let e=r.error.includes("infinite recursion");return(0,t.jsx)("div",{className:"bg-red-500/20 border border-red-500/50 rounded-xl p-4 mb-4",children:(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)("svg",{className:"w-5 h-5 text-red-400 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-red-400 font-semibold mb-2",children:"❌ Erro nos Diagn\xf3sticos"}),(0,t.jsx)("p",{className:"text-red-300 text-sm mb-2",children:r.error}),e&&(0,t.jsxs)("div",{className:"mt-3 p-3 bg-white/5 rounded-lg border border-white/10",children:[(0,t.jsx)("p",{className:"text-white/80 text-xs font-semibold mb-2",children:"\uD83D\uDD27 Como corrigir:"}),(0,t.jsxs)("ol",{className:"text-white/60 text-xs space-y-1 list-decimal list-inside",children:[(0,t.jsx)("li",{children:"Acesse o Supabase Dashboard: https://supabase.com/dashboard"}),(0,t.jsx)("li",{children:"V\xe1 em SQL Editor → New query"}),(0,t.jsxs)("li",{children:["Copie o conte\xfado do arquivo ",(0,t.jsx)("code",{className:"bg-white/10 px-1 rounded",children:"CORRIGIR_RLS_ADMIN_USERS_FINAL.sql"})]}),(0,t.jsx)("li",{children:"Cole e execute (Ctrl+Enter ou Cmd+Enter)"}),(0,t.jsx)("li",{children:"Recarregue esta p\xe1gina"})]})]}),(0,t.jsxs)("p",{className:"text-white/40 text-xs mt-3",children:["User ID: ",(0,t.jsx)("code",{className:"bg-white/10 px-1 rounded",children:r.userId})]})]})]})})}return r.hasSubscription?null:(0,t.jsx)("div",{className:"bg-amber-500/20 border border-amber-500/50 rounded-xl p-4 mb-4",children:(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)("svg",{className:"w-5 h-5 text-amber-400 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-amber-400 font-semibold mb-2",children:"⚠️ Nenhuma Subscription Encontrada"}),(0,t.jsx)("p",{className:"text-white/80 text-sm mb-2",children:"Voc\xea n\xe3o possui uma subscription ativa. Isso pode acontecer se:"}),(0,t.jsxs)("ul",{className:"text-white/60 text-xs mb-3 list-disc list-inside space-y-1",children:[(0,t.jsx)("li",{children:"O trigger `on_auth_user_created` n\xe3o foi executado"}),(0,t.jsx)("li",{children:"A subscription foi deletada ou desativada"}),(0,t.jsx)("li",{children:"Voc\xea precisa criar uma subscription manualmente"})]}),(0,t.jsxs)("div",{className:"mt-3 p-3 bg-white/5 rounded-lg border border-white/10",children:[(0,t.jsx)("p",{className:"text-white/80 text-xs font-semibold mb-2",children:"\uD83D\uDD27 Solu\xe7\xe3o:"}),(0,t.jsxs)("p",{className:"text-white/60 text-xs mb-2",children:["Execute o script ",(0,t.jsx)("code",{className:"bg-white/10 px-1 rounded",children:"VERIFICAR_SUBSCRIPTIONS.sql"})," ou ",(0,t.jsx)("code",{className:"bg-white/10 px-1 rounded",children:"CORRIGIR_SAAS_COMPLETO.sql"})," no Supabase SQL Editor."]})]}),(0,t.jsxs)("p",{className:"text-white/40 text-xs mt-3",children:["User ID: ",(0,t.jsx)("code",{className:"bg-white/10 px-1 rounded",children:r.userId})]})]})]})})};function x(e){let{children:r}=e,[s,n]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let e=()=>{window.innerWidth>=1024&&n(!1)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,t.jsxs)("div",{className:"flex h-screen w-screen overflow-hidden bg-gradient-to-br from-black via-gray-900 to-black",children:[(0,t.jsx)(m,{isMobileOpen:s,onMobileClose:()=>n(!1)}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,t.jsxs)("header",{className:"lg:hidden sticky top-0 z-40 bg-black/95 backdrop-blur-md border-b border-white/10 px-4 py-3 flex items-center justify-between shadow-lg",children:[(0,t.jsx)("button",{onClick:()=>n(!0),className:"p-2 rounded-lg text-white/70 hover:text-white hover:bg-white/10 transition-all duration-200","aria-label":"Abrir menu",children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-emerald-400 to-green-500 rounded-lg flex items-center justify-center shadow-lg shadow-emerald-500/30",children:(0,t.jsx)("svg",{className:"w-5 h-5 text-black",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})})}),(0,t.jsx)("span",{className:"text-white font-bold text-lg tracking-tight",children:"LaBPrompT"})]}),(0,t.jsx)("div",{className:"w-10"})]}),(0,t.jsx)("main",{className:"flex-1 overflow-y-auto overflow-x-hidden bg-black",children:(0,t.jsxs)("div",{className:"w-full max-w-[1920px] mx-auto px-4 md:px-6 lg:px-8 xl:px-10 py-4 md:py-6 lg:py-8",children:[(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)(h,{})}),(0,t.jsx)("div",{className:"mb-4 md:mb-5 lg:mb-6",children:(0,t.jsx)(u,{})}),(0,t.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-4 md:gap-5 lg:gap-6",children:(0,t.jsx)("div",{className:"lg:col-span-12",children:r})})]})})]})]})}},5024:(e,r,s)=>{"use strict";s.d(r,{It:()=>h,Ty:()=>d,du:()=>p,ex:()=>u,gg:()=>n,nG:()=>x,oo:()=>m,vQ:()=>c,x8:()=>o,zN:()=>l});var t=s(3217);async function a(){try{let{data:{session:e}}=await t.ND.auth.getSession();if(!(null==e?void 0:e.user))return null;let{data:r,error:s}=await t.ND.from("subscriptions").select("\n        *,\n        plan:plans(*)\n      ").eq("user_id",e.user.id).eq("is_active",!0).order("created_at",{ascending:!1}).limit(1).single();if(s){if("PGRST116"===s.code)return console.warn("⚠️ [getCurrentSubscription] Nenhuma assinatura encontrada para o usu\xe1rio. Verifique se o trigger est\xe1 criando subscriptions automaticamente."),null;throw console.error("❌ [getCurrentSubscription] Erro ao buscar subscription:",s),s}return r}catch(e){return console.error("❌ [getCurrentSubscription] Erro ao buscar subscription:",e),null}}async function n(){try{var e;let r=await a();if(!r)return{allowed:!1,reason:"Nenhuma assinatura ativa encontrada. Por favor, entre em contato com o suporte."};if(!(null==(e=r.plan)?void 0:e.can_share_chat))return{allowed:!1,reason:"Compartilhamento de chat n\xe3o dispon\xedvel no plano Trial. Fa\xe7a upgrade para acessar este recurso."};return{allowed:!0}}catch(e){return console.error("❌ Erro ao verificar compartilhamento:",e),{allowed:!1,reason:"Erro ao verificar permiss\xe3o. Tente novamente."}}}async function o(e){try{let{data:{session:r}}=await t.ND.auth.getSession();if(!(null==r?void 0:r.user))return!1;let{data:s,error:a}=await t.ND.rpc("check_user_access",{p_user_id:r.user.id,p_feature:e});if(a)return console.error("❌ Erro ao verificar acesso:",a),!1;return!0===s}catch(e){return console.error("❌ Erro ao verificar acesso:",e),!1}}async function i(e,r,s,a,n){try{let{data:{session:o}}=await t.ND.auth.getSession();if(!(null==o?void 0:o.user))return console.error("❌ Usu\xe1rio n\xe3o autenticado para registrar uso"),!1;let{error:i}=await t.ND.rpc("track_token_usage",{p_user_id:o.user.id,p_tokens_used:e,p_usage_type:r,p_model_used:s,p_prompt_id:a||null,p_version_id:n||null});if(i)return console.error("❌ Erro ao registrar uso de tokens:",i),!1;return!0}catch(e){return console.error("❌ Erro ao registrar uso de tokens:",e),!1}}async function l(){try{var e,r,s;let n=await a();if(!n)return{tokensUsed:0,tokensLimit:1e6,percentage:0};let{data:{session:o}}=await t.ND.auth.getSession();if(!(null==o?void 0:o.user))return{tokensUsed:0,tokensLimit:(null==(r=n.plan)?void 0:r.max_tokens_per_month)||1e6,percentage:0};let i=new Date,l=i.getFullYear(),c=i.getMonth()+1,{data:d,error:m}=await t.ND.from("usage_tracking").select("tokens_used").eq("user_id",o.user.id).eq("usage_year",l).eq("usage_month",c);if(m)return console.error("❌ Erro ao buscar uso:",m),{tokensUsed:0,tokensLimit:(null==(s=n.plan)?void 0:s.max_tokens_per_month)||1e6,percentage:0};let u=(null==d?void 0:d.reduce((e,r)=>e+(r.tokens_used||0),0))||0,h=(null==(e=n.plan)?void 0:e.max_tokens_per_month)||1e6,x=h>0?Math.round(u/h*100):0;return{tokensUsed:u,tokensLimit:h,percentage:x}}catch(e){return console.error("❌ Erro ao buscar uso do m\xeas:",e),{tokensUsed:0,tokensLimit:1e6,percentage:0}}}async function c(){try{var e,r,s,n;let o=await a();if(!o)return{versionsCount:0,versionsLimit:4,canCreateMore:!0};let{data:{session:i}}=await t.ND.auth.getSession();if(!(null==i?void 0:i.user))return{versionsCount:0,versionsLimit:(null==(r=o.plan)?void 0:r.max_prompt_versions)||4,canCreateMore:!0};let l=new Date,c=new Date(l.getFullYear(),l.getMonth(),1),{data:d,error:m}=await t.ND.from("prompts").select("id").eq("user_id",i.user.id);if(m||!(null==d?void 0:d.length))return{versionsCount:0,versionsLimit:(null==(s=o.plan)?void 0:s.max_prompt_versions)||4,canCreateMore:!0};let u=d.map(e=>e.id),{data:h,error:x}=await t.ND.from("prompt_versions").select("id").in("prompt_id",u).gte("created_at",c.toISOString());if(x)return console.error("❌ Erro ao contar vers\xf5es:",x),{versionsCount:0,versionsLimit:(null==(n=o.plan)?void 0:n.max_prompt_versions)||4,canCreateMore:!0};let p=(null==h?void 0:h.length)||0,f=(null==(e=o.plan)?void 0:e.max_prompt_versions)||4;return{versionsCount:p,versionsLimit:f,canCreateMore:-1===f||p<f}}catch(e){return console.error("❌ Erro ao contar vers\xf5es:",e),{versionsCount:0,versionsLimit:4,canCreateMore:!0}}}async function d(){let e=await a();if(!e||!e.plan)return console.warn("⚠️ [getCurrentPlanInfo] Nenhuma subscription ou plano encontrado."),null;let r="trial"===e.status,s=null;if(r&&e.trial_ends_at){let r=new Date(e.trial_ends_at),t=new Date;s=Math.max(0,Math.ceil((r.getTime()-t.getTime())/864e5))}return{planName:e.plan.name,displayName:e.plan.display_name,isTrial:r,trialDaysLeft:s,canShareChat:e.plan.can_share_chat,maxVersions:e.plan.max_prompt_versions,maxTokens:e.plan.max_tokens_per_month}}async function m(e){try{var r;let s=await a();if(!s)return{allowed:!1,reason:"Nenhuma assinatura ativa encontrada. Por favor, entre em contato com o suporte."};if((null==(r=s.plan)?void 0:r.max_tokens_per_month)===-1)return{allowed:!0};let t=await l();if(-1===t.tokensLimit)return{allowed:!0};if(t.tokensUsed+e>t.tokensLimit){let e=Math.max(0,t.tokensLimit-t.tokensUsed);return{allowed:!1,reason:"Limite de tokens excedido. Voc\xea tem ".concat(e.toLocaleString("pt-BR")," tokens restantes este m\xeas. Upgrade seu plano para continuar.")}}return{allowed:!0}}catch(e){return console.error("❌ Erro ao verificar tokens:",e),{allowed:!1,reason:"Erro ao verificar limite de tokens. Tente novamente."}}}async function u(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"prompt_generation",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"gemini-2.5-flash",t=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;return i(e,r,s,t,a)}async function h(){let[e,r,s]=await Promise.all([d(),c(),l()]);return{canCreateVersion:r.canCreateMore,canShareChat:(null==e?void 0:e.canShareChat)||!1,versionsCount:r.versionsCount,versionsLimit:r.versionsLimit,tokensUsed:s.tokensUsed,tokensLimit:s.tokensLimit,trialDaysLeft:(null==e?void 0:e.trialDaysLeft)||null}}async function x(){if(!await o("create_version")){let e=await c();return{allowed:!1,reason:"Limite de vers\xf5es atingido! Voc\xea j\xe1 criou ".concat(e.versionsCount," de ").concat(e.versionsLimit," vers\xf5es permitidas no seu plano este m\xeas. Upgrade para Premium para criar vers\xf5es ilimitadas.")}}return{allowed:!0}}async function p(){}},8525:(e,r,s)=>{"use strict";s.d(r,{U:()=>n});var t=s(6010),a=s(5704);function n(){let e=a.env.NEXT_PUBLIC_SUPABASE_URL,r=a.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;return e&&r||console.warn("⚠️ Vari\xe1veis de ambiente do Supabase n\xe3o configuradas. O cliente Supabase pode n\xe3o funcionar corretamente."),(0,t.createBrowserClient)(e||"",r||"",{db:{schema:"public"},auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0},global:{headers:{"x-client-info":"labprompt-nextjs"}}})}}},e=>{e.O(0,[503,163,217,441,255,358],()=>e(e.s=3265)),_N_E=e.O()}]);