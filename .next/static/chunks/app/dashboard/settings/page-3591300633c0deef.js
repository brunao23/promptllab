(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[631],{906:(e,a,r)=>{"use strict";r.d(a,{KA:()=>o,OW:()=>i,YG:()=>l,cI:()=>n,dD:()=>s,tv:()=>d,y1:()=>c});var t=r(3217);async function s(e){try{let{data:{user:a},error:r}=await t.ND.auth.getUser();if(r||!a)return null;let{data:s,error:o}=await t.ND.from("user_api_keys").select("*").eq("user_id",a.id).eq("provider",e).eq("is_active",!0).maybeSingle();if(o)return"PGRST116"!==o.code&&console.warn("Erro ao buscar API Key do usu\xe1rio:",o.message),null;if(!s)return null;return s.api_key||null}catch(e){return console.warn("Erro ao buscar API Key do usu\xe1rio (ignorado):",(null==e?void 0:e.message)||e),null}}async function o(e,a){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{let s,{data:{user:o}}=await t.ND.auth.getUser();if(!o)throw Error("Usu\xe1rio n\xe3o autenticado");if(!a||a.trim().length<10)throw Error("API Key inv\xe1lida");let{data:i}=await t.ND.from("user_api_keys").select("id").eq("user_id",o.id).eq("provider",e).eq("is_active",!0).maybeSingle();if(i){let{data:e,error:o}=await t.ND.from("user_api_keys").update({api_key:a.trim(),is_global:r,updated_at:new Date().toISOString()}).eq("id",i.id).select().maybeSingle();if(o)throw o;if(!e)throw Error("Erro ao atualizar API Key");s=e}else{await t.ND.from("user_api_keys").update({is_active:!1}).eq("user_id",o.id).eq("provider",e);let{data:i,error:l}=await t.ND.from("user_api_keys").insert({user_id:o.id,provider:e,api_key:a.trim(),is_global:r,is_active:!0}).select().maybeSingle();if(l)throw l;if(!i)throw Error("Erro ao criar API Key");s=i}return s}catch(e){throw console.error("Erro ao salvar API Key:",e),Error(e.message||"Erro ao salvar API Key")}}async function i(){try{let{data:{user:e}}=await t.ND.auth.getUser();if(!e)return[];let{data:a,error:r}=await t.ND.from("user_api_keys").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});if(r)throw r;return a||[]}catch(e){return console.error("Erro ao listar API Keys:",e),[]}}async function l(e){try{let{data:{user:a}}=await t.ND.auth.getUser();if(!a)throw Error("Usu\xe1rio n\xe3o autenticado");let{error:r}=await t.ND.from("user_api_keys").delete().eq("id",e).eq("user_id",a.id);if(r)throw r}catch(e){throw console.error("Erro ao deletar API Key:",e),Error(e.message||"Erro ao deletar API Key")}}async function n(e,a){try{let{data:{user:r}}=await t.ND.auth.getUser();if(!r)return;let{data:s}=await t.ND.from("user_api_keys").select("usage_count, total_tokens_used").eq("user_id",r.id).eq("provider",e).eq("is_active",!0).maybeSingle();if(!s)return;let{error:o}=await t.ND.from("user_api_keys").update({usage_count:(s.usage_count||0)+1,total_tokens_used:(s.total_tokens_used||0)+a,last_used_at:new Date().toISOString()}).eq("user_id",r.id).eq("provider",e).eq("is_active",!0);o&&console.error("Erro ao atualizar estat\xedsticas:",o)}catch(e){console.error("Erro ao atualizar uso da API Key:",e)}}async function d(e){try{if(!e||0===e.trim().length)return!1;e.startsWith("AIzaSy")||console.warn("API Key do Gemini n\xe3o tem o formato esperado (deve come\xe7ar com AIzaSy)");let a=await fetch("https://generativelanguage.googleapis.com/v1beta/models?key=".concat(encodeURIComponent(e.trim())),{method:"GET",headers:{"Content-Type":"application/json"}});if(!a.ok){let e=await a.text();return console.error("Erro na valida\xe7\xe3o Gemini:",a.status,e),!1}let r=await a.json();return r&&Array.isArray(r.models)&&r.models.length>0}catch(e){var a,r;if(console.error("Erro ao validar API Key do Gemini:",e),(null==(a=e.message)?void 0:a.includes("Failed to fetch"))||(null==(r=e.message)?void 0:r.includes("NetworkError")))return console.warn("Erro de rede ao validar. Permitindo salvar a chave para tentativa posterior."),!0;return!1}}async function c(e){try{if(!e||0===e.trim().length)return!1;e.startsWith("sk-")||console.warn("API Key da OpenAI n\xe3o tem o formato esperado (deve come\xe7ar com sk-)");let a=await fetch("https://api.openai.com/v1/models",{method:"GET",headers:{Authorization:"Bearer ".concat(e.trim()),"Content-Type":"application/json"}});if(!a.ok){let e=await a.text();return console.error("Erro na valida\xe7\xe3o OpenAI:",a.status,e),a.status,!1}let r=await a.json();return r&&Array.isArray(r.data)&&r.data.length>0}catch(e){var a,r;if(console.error("Erro ao validar API Key da OpenAI:",e),(null==(a=e.message)?void 0:a.includes("Failed to fetch"))||(null==(r=e.message)?void 0:r.includes("NetworkError")))return console.warn("Erro de rede ao validar. Permitindo salvar a chave para tentativa posterior."),!0;return!1}}},7251:(e,a,r)=>{Promise.resolve().then(r.bind(r,8405))},8405:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>h});var t=r(5155),s=r(2115),o=r(63),i=r(8525),l=r(3217),n=r(5704);async function d(){try{var e,a,r,t;let{data:s,error:o}=await l.ND.storage.listBuckets();if(o)return console.error("❌ Erro ao listar buckets:",o),{success:!1,message:"Erro ao verificar buckets: ".concat(o.message)};if(null==s?void 0:s.find(e=>"avatars"===e.name))return{success:!0,message:'Bucket "avatars" j\xe1 existe'};let i=void 0!==n&&(null==(e=n.env)?void 0:e.NEXT_PUBLIC_SUPABASE_URL)||((a=void 0,void 0===a)?void 0:a.VITE_SUPABASE_URL)||"",d=void 0!==n&&(null==(r=n.env)?void 0:r.NEXT_PUBLIC_SUPABASE_ANON_KEY)||((t=void 0,void 0===t)?void 0:t.VITE_SUPABASE_ANON_KEY)||"";if(!i||!d)return{success:!1,message:"Vari\xe1veis de ambiente do Supabase n\xe3o configuradas"};let c=await fetch("".concat(i,"/storage/v1/bucket"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d),apikey:d},body:JSON.stringify({name:"avatars",public:!0,allowed_mime_types:["image/png","image/jpeg","image/jpg","image/gif","image/webp"],file_size_limit:5242880})}),u=await c.json();if(!c.ok){if(u.message&&(u.message.includes("already exists")||u.message.includes("duplicate")))return{success:!0,message:'Bucket "avatars" j\xe1 existe'};if(401===c.status||403===c.status)return{success:!1,message:"Permiss\xe3o insuficiente. A cria\xe7\xe3o autom\xe1tica de buckets requer SERVICE_ROLE_KEY. Por favor, crie o bucket manualmente no Supabase Dashboard."};throw Error(u.message||"HTTP ".concat(c.status,": ").concat(c.statusText))}return{success:!0,message:'Bucket "avatars" criado com sucesso!'}}catch(e){return console.error("❌ Erro ao criar bucket:",e),{success:!1,message:e.message||"Erro ao criar bucket"}}}var c=r(8231),u=r(906);let m=()=>{var e,a;let r=(0,o.useRouter)(),n=(0,i.U)(),[m,h]=(0,s.useState)(!0),[p,b]=(0,s.useState)(!1),[f,x]=(0,s.useState)(!1),[v,w]=(0,s.useState)(!1),[g,y]=(0,s.useState)(null),[N,j]=(0,s.useState)(null),[_,A]=(0,s.useState)({fullName:"",email:""}),[k,P]=(0,s.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[E,S]=(0,s.useState)(null),[I,K]=(0,s.useState)(null),C=s.useRef(!1),[T,U]=(0,s.useState)([]),[q,O]=(0,s.useState)(!1),[D,G]=(0,s.useState)(!1),[B,z]=(0,s.useState)(!1),[R,L]=(0,s.useState)({provider:"gemini",apiKey:"",isGlobal:!1});(0,s.useEffect)(()=>{C.current||(Y().then(()=>{C.current=!0}),V())},[]);let V=async()=>{try{O(!0);let e=await (0,u.OW)();U(e)}catch(e){console.error("Erro ao carregar API Keys:",e),y("Erro ao carregar API Keys")}finally{O(!1)}},F=async e=>{if(e.preventDefault(),!R.apiKey.trim())return void y("Por favor, insira uma API Key");try{G(!0),z(!0),y(null),j(null);let e=!1;if("gemini"===R.provider?e=await (0,u.tv)(R.apiKey.trim()):"openai"===R.provider&&(e=await (0,u.y1)(R.apiKey.trim())),!e){y("API Key inv\xe1lida para ".concat("gemini"===R.provider?"Gemini":"OpenAI",". Verifique se a chave est\xe1 correta.")),z(!1),G(!1);return}z(!1),await (0,u.KA)(R.provider,R.apiKey.trim(),R.isGlobal),j("API Key do ".concat("gemini"===R.provider?"Gemini":"OpenAI"," salva com sucesso!")),setTimeout(()=>j(null),3e3),L({provider:"gemini",apiKey:"",isGlobal:!1}),await V()}catch(e){console.error("Erro ao salvar API Key:",e),y(e.message||"Erro ao salvar API Key")}finally{G(!1),z(!1)}},W=async e=>{if(confirm("Tem certeza que deseja remover esta API Key?"))try{await (0,u.YG)(e),j("API Key removida com sucesso!"),setTimeout(()=>j(null),3e3),await V()}catch(e){console.error("Erro ao deletar API Key:",e),y(e.message||"Erro ao remover API Key")}},Y=async()=>{if(!m||!C.current)try{h(!0);let{data:{session:e}}=await n.auth.getSession();if(null==e?void 0:e.user){let a=await (0,l.Rk)();a?(A({fullName:a.full_name||"",email:e.user.email||a.email||""}),a.avatar_url?S(a.avatar_url):S(null)):A({fullName:"",email:e.user.email||""})}}catch(a){console.error("Erro ao carregar perfil:",a),y("Erro ao carregar dados do perfil");let{data:{session:e}}=await n.auth.getSession();(null==e?void 0:e.user)&&_.email}finally{h(!1)}},M=async()=>{if(I)try{w(!0),y(null),j(null);let e=await (0,l.F4)(I);S(e),K(null),j("Avatar atualizado com sucesso!"),setTimeout(()=>j(null),3e3),await Y()}catch(a){console.error("Erro ao fazer upload do avatar:",a);let e=a.message||"Erro ao fazer upload do avatar";if(e.includes("bucket")||e.includes("Bucket"))try{y("Criando bucket automaticamente... Aguarde...");let e=await d();if(e.success){y(null),j("Bucket verificado! Tentando fazer upload novamente..."),setTimeout(async()=>{try{let e=await (0,l.F4)(I);S(e),K(null),j("Avatar atualizado com sucesso!"),setTimeout(()=>j(null),3e3),await Y()}catch(e){y(e.message||"Erro ao fazer upload ap\xf3s criar bucket. Tente novamente.")}finally{w(!1)}},2e3);return}y("N\xe3o foi poss\xedvel criar o bucket automaticamente.\n\n"+e.message+'\n\nPor favor, crie o bucket "avatars" manualmente no Supabase Storage:\n1. Acesse https://app.supabase.com\n2. V\xe1 para Storage → Create bucket\n3. Nome: avatars\n4. P\xfablico: Sim\n5. Clique em Create\n\nConsulte INSTRUCOES_BUCKET_AVATARS.md para mais detalhes.')}catch(a){y(e+"\n\n\uD83D\uDCCB N\xe3o foi poss\xedvel criar o bucket automaticamente. Por favor, crie manualmente seguindo as instru\xe7\xf5es em INSTRUCOES_BUCKET_AVATARS.md")}else y(e)}finally{w(!1)}},X=async e=>{e.preventDefault();try{b(!0),y(null),j(null);let e=(0,c.jZ)(_.fullName.trim()),a=(0,c.yS)(e);if(!a.valid){y(a.error||"Nome inv\xe1lido"),b(!1);return}let r=e||"",t=await (0,l.r7)({full_name:r});if(t){let e=t.full_name||r;A(a=>({...a,fullName:e}))}else A(e=>({...e,fullName:r}));j("Perfil atualizado com sucesso!"),setTimeout(()=>j(null),3e3),setTimeout(async()=>{await Y()},500)}catch(e){console.error("Erro ao salvar perfil:",e),y(e.message||"Erro ao salvar perfil")}finally{b(!1)}},J=async e=>{e.preventDefault();try{if(x(!0),y(null),j(null),k.newPassword!==k.confirmPassword){y("As senhas n\xe3o coincidem"),x(!1);return}let e=(0,c.Oj)(k.newPassword);if(!e.valid){y(e.errors.join(", ")||"Senha inv\xe1lida"),x(!1);return}await (0,l.ec)(k.currentPassword,k.newPassword),j("Senha alterada com sucesso!"),setTimeout(()=>j(null),3e3),P({currentPassword:"",newPassword:"",confirmPassword:""})}catch(e){console.error("Erro ao alterar senha:",e),y(e.message||"Erro ao alterar senha")}finally{x(!1)}};return m?(0,t.jsx)("div",{className:"h-full w-full flex items-center justify-center bg-black",children:(0,t.jsxs)("div",{className:"flex flex-col items-center space-y-6",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"w-16 h-16 border-4 border-white/10 rounded-full"}),(0,t.jsx)("div",{className:"absolute top-0 left-0 w-16 h-16 border-4 border-transparent border-t-emerald-400 border-r-emerald-500 rounded-full animate-spin"})]}),(0,t.jsx)("p",{className:"text-white font-medium text-lg",children:"Carregando configura\xe7\xf5es..."})]})}):(0,t.jsx)("div",{className:"h-full w-full overflow-auto bg-black",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[(0,t.jsx)("button",{onClick:()=>r.push("/dashboard"),className:"p-2 rounded-lg text-white/60 hover:text-white hover:bg-white/10 transition-colors border border-white/10",title:"Voltar",children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Configura\xe7\xf5es"}),(0,t.jsx)("p",{className:"text-white/60",children:"Gerencie sua conta e prefer\xeancias"})]})]})}),g&&(0,t.jsx)("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/30 rounded-lg",children:(0,t.jsx)("p",{className:"text-red-400 text-sm",children:g})}),N&&(0,t.jsx)("div",{className:"mb-6 p-4 bg-emerald-500/10 border border-emerald-500/30 rounded-lg",children:(0,t.jsx)("p",{className:"text-emerald-400 text-sm",children:N})}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm rounded-2xl p-6 border border-white/10 shadow-xl",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:"Foto de Perfil"}),(0,t.jsxs)("div",{className:"flex items-center space-x-6 mb-4",children:[(0,t.jsx)("div",{className:"w-24 h-24 bg-gradient-to-br from-amber-400 to-yellow-500 rounded-full flex items-center justify-center text-black font-bold text-2xl shadow-lg shadow-amber-500/30 overflow-hidden border-2 border-white/20",children:E?(0,t.jsx)("img",{src:E,alt:"Avatar",className:"w-full h-full object-cover"}):(null==(e=_.fullName)?void 0:e.charAt(0).toUpperCase())||(null==(a=_.email)?void 0:a.charAt(0).toUpperCase())||"U"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("label",{className:"block mb-2",children:[(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var a;let r=null==(a=e.target.files)?void 0:a[0];if(!r)return;if(!r.type.startsWith("image/"))return void y("Por favor, selecione apenas imagens");if(r.size>5242880)return void y("A imagem deve ter no m\xe1ximo 5MB");K(r);let t=new FileReader;t.onloadend=()=>{S(t.result)},t.readAsDataURL(r)},className:"hidden"}),(0,t.jsx)("span",{className:"inline-block px-4 py-2 bg-white/5 hover:bg-white/10 text-white rounded-lg cursor-pointer transition-colors border border-white/10",children:"Escolher Imagem"})]}),(0,t.jsx)("p",{className:"text-xs text-white/40 mt-2",children:"PNG, JPG ou GIF (m\xe1x. 5MB)"})]})]}),I&&(0,t.jsx)("button",{onClick:M,disabled:v,className:"px-4 py-2 bg-emerald-500 hover:bg-emerald-600 text-black font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:v?"Enviando...":"Salvar Avatar"})]}),(0,t.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm rounded-2xl p-6 border border-white/10 shadow-xl",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:"Informa\xe7\xf5es do Perfil"}),(0,t.jsxs)("form",{onSubmit:X,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Nome Completo"}),(0,t.jsx)("input",{type:"text",value:_.fullName,onChange:e=>A({..._,fullName:e.target.value}),className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/40 focus:outline-none focus:border-emerald-500/50 focus:ring-1 focus:ring-emerald-500/50",placeholder:"Seu nome completo"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Email"}),(0,t.jsx)("input",{type:"email",value:_.email,disabled:!0,className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white/60 cursor-not-allowed"}),(0,t.jsx)("p",{className:"text-xs text-white/40 mt-1",children:"O email n\xe3o pode ser alterado"})]}),(0,t.jsx)("button",{type:"submit",disabled:p,className:"px-6 py-3 bg-emerald-500 hover:bg-emerald-600 text-black font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Salvando...":"Salvar Altera\xe7\xf5es"})]})]}),(0,t.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm rounded-2xl p-6 border border-white/10 shadow-xl",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:"Alterar Senha"}),(0,t.jsxs)("form",{onSubmit:J,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Senha Atual"}),(0,t.jsx)("input",{type:"password",value:k.currentPassword,onChange:e=>P({...k,currentPassword:e.target.value}),className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/40 focus:outline-none focus:border-emerald-500/50 focus:ring-1 focus:ring-emerald-500/50",placeholder:"Digite sua senha atual",autoComplete:"current-password"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Nova Senha"}),(0,t.jsx)("input",{type:"password",value:k.newPassword,onChange:e=>P({...k,newPassword:e.target.value}),className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/40 focus:outline-none focus:border-emerald-500/50 focus:ring-1 focus:ring-emerald-500/50",placeholder:"M\xednimo 8 caracteres",autoComplete:"new-password"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Confirmar Nova Senha"}),(0,t.jsx)("input",{type:"password",value:k.confirmPassword,onChange:e=>P({...k,confirmPassword:e.target.value}),className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/40 focus:outline-none focus:border-emerald-500/50 focus:ring-1 focus:ring-emerald-500/50",placeholder:"Digite a nova senha novamente",autoComplete:"new-password"})]}),(0,t.jsx)("button",{type:"submit",disabled:f||!k.currentPassword||!k.newPassword||!k.confirmPassword,className:"px-6 py-3 bg-emerald-500 hover:bg-emerald-600 text-black font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:f?"Alterando...":"Alterar Senha"})]})]}),(0,t.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm rounded-2xl p-6 border border-white/10 shadow-xl",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:"API Keys"}),(0,t.jsx)("p",{className:"text-sm text-white/60 mb-6",children:"Configure suas pr\xf3prias API Keys para usar quando a API do sistema estiver indispon\xedvel ou quando voc\xea quiser usar sua pr\xf3pria chave."}),(0,t.jsxs)("form",{onSubmit:F,className:"mb-6 space-y-4 p-4 bg-white/5 rounded-lg border border-white/10",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Provedor"}),(0,t.jsxs)("select",{value:R.provider,onChange:e=>L({...R,provider:e.target.value}),className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white focus:outline-none focus:border-emerald-500/50 focus:ring-1 focus:ring-emerald-500/50",children:[(0,t.jsx)("option",{value:"gemini",children:"Google Gemini"}),(0,t.jsx)("option",{value:"openai",children:"OpenAI"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"API Key"}),(0,t.jsx)("input",{type:"password",value:R.apiKey,onChange:e=>L({...R,apiKey:e.target.value}),className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/40 focus:outline-none focus:border-emerald-500/50 focus:ring-1 focus:ring-emerald-500/50 font-mono text-sm",placeholder:"gemini"===R.provider?"AIzaSy...":"sk-..."}),(0,t.jsx)("p",{className:"text-xs text-white/40 mt-1",children:"gemini"===R.provider?"Obtenha sua chave em: https://aistudio.google.com/app/apikey":"Obtenha sua chave em: https://platform.openai.com/api-keys"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("input",{type:"checkbox",id:"isGlobal",checked:R.isGlobal,onChange:e=>L({...R,isGlobal:e.target.checked}),className:"w-4 h-4 rounded border-white/20 bg-white/5 text-emerald-500 focus:ring-emerald-500/50"}),(0,t.jsx)("label",{htmlFor:"isGlobal",className:"text-sm text-white/80",children:"Usar globalmente quando a API do sistema falhar"})]}),(0,t.jsx)("button",{type:"submit",disabled:D||B||!R.apiKey.trim(),className:"w-full px-6 py-3 bg-emerald-500 hover:bg-emerald-600 text-black font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:B?"Validando...":D?"Salvando...":"Salvar API Key"})]}),q?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"inline-block w-8 h-8 border-4 border-white/10 rounded-full border-t-emerald-400 animate-spin"}),(0,t.jsx)("p",{className:"text-white/60 mt-4",children:"Carregando API Keys..."})]}):0===T.length?(0,t.jsx)("div",{className:"text-center py-8 text-white/60",children:(0,t.jsx)("p",{children:"Nenhuma API Key configurada"})}):(0,t.jsx)("div",{className:"space-y-3",children:T.map(e=>(0,t.jsxs)("div",{className:"p-4 bg-white/5 rounded-lg border border-white/10 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,t.jsx)("span",{className:"px-3 py-1 bg-emerald-500/20 text-emerald-400 rounded text-sm font-semibold",children:"gemini"===e.provider?"Gemini":"OpenAI"}),e.is_active&&(0,t.jsx)("span",{className:"px-2 py-1 bg-green-500/20 text-green-400 rounded text-xs",children:"Ativa"}),e.is_global&&(0,t.jsx)("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-400 rounded text-xs",children:"Global"})]}),(0,t.jsxs)("p",{className:"text-xs text-white/40 font-mono",children:[e.api_key.substring(0,10),"...",e.api_key.substring(e.api_key.length-4)]}),e.usage_count>0&&(0,t.jsxs)("p",{className:"text-xs text-white/60 mt-1",children:["Usada ",e.usage_count," vez(es) • ",e.total_tokens_used.toLocaleString()," tokens"]})]}),(0,t.jsx)("button",{onClick:()=>W(e.id),className:"px-4 py-2 bg-red-500/20 hover:bg-red-500/30 text-red-400 rounded-lg transition-colors text-sm",children:"Remover"})]},e.id))})]})]})]})})};function h(){return(0,t.jsx)(m,{})}},8525:(e,a,r)=>{"use strict";r.d(a,{U:()=>o});var t=r(6010),s=r(5704);function o(){let e=s.env.NEXT_PUBLIC_SUPABASE_URL,a=s.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;return e&&a||console.warn("⚠️ Vari\xe1veis de ambiente do Supabase n\xe3o configuradas. O cliente Supabase pode n\xe3o funcionar corretamente."),(0,t.createBrowserClient)(e||"",a||"",{db:{schema:"public"},auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0},global:{headers:{"x-client-info":"labprompt-nextjs"}}})}}},e=>{e.O(0,[503,163,217,441,255,358],()=>e(e.s=7251)),_N_E=e.O()}]);